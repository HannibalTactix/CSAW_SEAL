SYSTEM_INST_DIR_SRC = ./sys_inst_src
SYSTEM_INST_DIR_VER = ./sys_inst_ver
SYSTEM_INST_FILES_SRC = $(wildcard $(SYSTEM_INST_DIR_SRC)/*.txt)
SYSTEM_INST_FILES_VER = $(wildcard $(SYSTEM_INST_DIR_VER)/*.txt)

# Define the directories to clean
CLEAN_DIRS := error_state mod ver

.PHONY: run clean

run:
	# Initial run and verification for SRC and VER files
	@for file in $(SYSTEM_INST_FILES_SRC); do \
		echo "Starting DAG generation with $$file"; \
		SYS_INST_FILE=$$file python3 tool.py & \
	done; \
	wait
	@for file in $(SYSTEM_INST_FILES_VER); do \
		echo "Finding errors with $$file"; \
		SYS_INST_FILE=$$file python3 verification.py & \
	done; \
	wait

clean:
	rm -rf $(addsuffix /*, $(CLEAN_DIRS))
	echo "All files in error_state, mod, and ver directories have been deleted."
